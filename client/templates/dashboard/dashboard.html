<template name='dashboardLocalDelivery'>
  <div class='container'>
    <a  class='btn btn-lg btn-block btn-danger' href="{{pathFor 'myRoute'}}">My Deliveries</a>
    <div class='row'>
      <div class='text-center'>
        <h1>Local Deliveries/Pickups Needing Action</h1>
      </div>
    </div>
    {{#if deliveriesSelected}}
      <div class='row text-center'>
        <div class='col-xs-9'>
          <a  class='btn btn-lg btn-block btn-success addDeliveriesToMyQueue' href="#">Add {{numberOfOrders}} Deliveries/Pick Ups to {{selectedDriver}} Route</a>
        </div>
        <div class='col-xs-3'>
          <select class="form-control driver-select">
            <option>Select a Driver</option>
            {{#each allUsers}}
            <option id={{_id}} value='{{_id}}'>{{username}}</option>
            {{/each}}
          </select>
        </div>
      </div>
    {{/if}}
    <div class='row'>
      <h2>Deliveries:</h2>
      <div class='table-responsive'>
        <table class='table table-hover'>
          <thead>
            <tr>
              <th>Select</th>
              <th>Order Number</th>
              <th>Delivery/PickUp</th>
              <th>Location</th>
              <th>Contact Info</th>
              <th>Date for Delivery</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            {{#each deliveryOrders}}
              <tr data-id='{{_id}} data-shopify={{shopifyOrderNumber}}'>
                <td>
                  {{#if deliverySelected}}
                    <input type="checkbox" name="order_{{_id}}" id="checkboxOrder_{{_id}}" class="hide" data-id={{_id}} checked=checked><label for="order_{{_id}}" style="cursor: pointer;"><i class="fa fa-check-square-o fa-lg"></i></label>
                  {{else}}
                    <input type="checkbox" name="order_{{_id}}" id="checkboxOrder_{{_id}}" class="hide" data-id={{_id}}><label for="order_{{_id}}" style="cursor: pointer;"><i class="fa fa-square-o fa-lg"></i></label>
                  {{/if}}
                </td>
                <td><a href="{{pathFor 'orderDetails' _id}}"><strong>{{shopifyOrderNumber}}</strong></a></td>
                <td>{{{deliveryType}}}</td>
                <td>{{{deliveryAddress}}}</td>
                <td>
                  {{contact}}<br>
                  {{phone}}
                </td>
                <td>{{whichDate}}</td>
                <td>{{deliveryStatus}}</td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>
    <div class='row'>
    <h2>PickUps:</h2>
      <div class='table-responsive'>
        <table class='table table-hover'>
          <thead>
            <tr>
              <th>Select</th>
              <th>Order Number</th>
              <th>Delivery/PickUp</th>
              <th>Location</th>
              <th>Contact Info</th>
              <th>Date for Pickup</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            {{#each pickUpOrders}}
              <tr data-id='{{_id}} data-shopify={{shopifyOrderNumber}}'>
                <td>
                  {{#if deliverySelected}}
                    <input type="checkbox" name="order_{{_id}}" id="checkboxOrder_{{_id}}" class="hide" data-id={{_id}} checked=checked><label for="order_{{_id}}" style="cursor: pointer;"><i class="fa fa-check-square-o fa-lg"></i></label>
                  {{else}}
                    <input type="checkbox" name="order_{{_id}}" id="checkboxOrder_{{_id}}" class="hide" data-id={{_id}}><label for="order_{{_id}}" style="cursor: pointer;"><i class="fa fa-square-o fa-lg"></i></label>
                  {{/if}}
                </td>
                <td><a href="{{pathFor 'orderDetails' _id}}"><strong>{{shopifyOrderNumber}}</strong></a></td>
                <td>{{{deliveryType}}}</td>
                <td>{{{deliveryAddress }}}</td>
                <td>
                  {{contact}}<br>
                  {{phone}}
                </td>
                <td>{{whichDate }}</td>
                <td>{{deliveryStatus}}</td>
              </tr>

            {{/each}}
          </tbody>
        </table>
      </div>
    </div>
    <div class='row'>
      <div class='text-center'>
        <h1>Local Deliveries/Pickups in Transit</h1>
      </div>
      <div class='table-responsive'>
        <table class='table table-hover'>
          <thead>
            <tr>
              <th>Order Number</th>
              <th>Delivery/PickUp</th>
              <th>Location</th>
              <th>Contact</th>
              <th>Status</th>
              <th>Driver</th>
            </tr>
          </thead>
          <tbody>
            {{#each inTransitLocalDelivery}}
              <tr>
                <td><a href="{{pathFor 'orderDetails' _id}}"><strong>{{shopifyOrderNumber}}</strong></a></td>
                <td>{{{deliveryType}}}</td>
                <td>{{delivery.location}}</td>
                <td>
                  {{contact}}<br>
                  {{phone}}
                </td>
                <td>{{delivery.deliveryStatus}}</td>
                <td>{{driverName this.delivery.delivererId}}</td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</template>
